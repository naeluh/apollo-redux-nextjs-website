{"version":3,"file":"static/webpack/static/development/pages/index.js.677d684b5c3c6b81fa14.hot-update.js","sources":["webpack:///./components/PostList.js"],"sourcesContent":["import { Query } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport ErrorMessage from './ErrorMessage'\nimport PostUpvoter from './PostUpvoter'\n\nexport const allPostsQuery = gql`\n  query {\n    webs {\n      Title\n    }\n  }\n`\nexport const allPostsQueryVars = {\n  skip: 0,\n  first: 10\n}\n\nexport default function PostList () {\n  return (\n    <Query query={allPostsQuery} variables={allPostsQueryVars}>\n      {({ loading, error, data: { webs }, fetchMore }) => {\n        if (error) return <ErrorMessage message='Error loading posts.' />\n        if (loading) return <div>Loading</div>\n\n        console.log(webs)\n\n        const areMorePosts = webs.length\n        return (\n          <section>\n            <ul>\n              {allPosts.map((post, index) => (\n                <li key={post.id}>\n                  <div>\n                    <span>{index + 1}. </span>\n                    <a href={post.url}>{post.title}</a>\n                    <PostUpvoter id={post.id} votes={post.votes} />\n                  </div>\n                </li>\n              ))}\n            </ul>\n            {areMorePosts ? (\n              <button onClick={() => loadMorePosts(allPosts, fetchMore)}>\n                {' '}\n                {loading ? 'Loading...' : 'Show More'}{' '}\n              </button>\n            ) : (\n              ''\n            )}\n            <style jsx>{`\n              section {\n                padding-bottom: 20px;\n              }\n              li {\n                display: block;\n                margin-bottom: 10px;\n              }\n              div {\n                align-items: center;\n                display: flex;\n              }\n              a {\n                font-size: 14px;\n                margin-right: 10px;\n                text-decoration: none;\n                padding-bottom: 0;\n                border: 0;\n              }\n              span {\n                font-size: 14px;\n                margin-right: 5px;\n              }\n              ul {\n                margin: 0;\n                padding: 0;\n              }\n              button:before {\n                align-self: center;\n                border-style: solid;\n                border-width: 6px 4px 0 4px;\n                border-color: #ffffff transparent transparent transparent;\n                content: '';\n                height: 0;\n                margin-right: 5px;\n                width: 0;\n              }\n            `}</style>\n          </section>\n        )\n      }}\n    </Query>\n  )\n}\n\nfunction loadMorePosts (allPosts, fetchMore) {\n  fetchMore({\n    variables: {\n      skip: allPosts.length\n    },\n    updateQuery: (previousResult, { fetchMoreResult }) => {\n      if (!fetchMoreResult) {\n        return previousResult\n      }\n      return Object.assign({}, previousResult, {\n        // Append the new posts results to the old one\n        allPosts: [...previousResult.allPosts, ...fetchMoreResult.allPosts]\n      })\n    }\n  })\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AAOA;AACA;AACA;AAFA;AAKA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAbA;AAAA;AAAA;AAAA;AA4DA;AAGA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AAZA;AAcA;;;;A","sourceRoot":""}